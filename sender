<!DOCTYPE html>
<html>
<head>
  <title>Delivery Sender</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <h2>Delivery Tracking (Sender)</h2>
  <p>Status: <span id="status">Waiting...</span></p>

<script>
  // ---------- Firebase Config ----------
  const firebaseConfig = {
    apiKey: "AIzaSyAiHk4HTo8mQUb_fRZx1iRZXoDXecbgV_Q",
    authDomain: "fooddeliverytracker-ac56e.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
    projectId: "YOUR_PROJECT_ID",
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // ---------- Order ID ----------
  const orderId = "order123"; // Change per order if needed

  // ---------- Send Location ----------
  function sendLocation(position) {
    const lat = position.coords.latitude;
    const lng = position.coords.longitude;

    db.ref('orders/' + orderId + '/location').set({
      lat: lat,
      lng: lng,
      timestamp: Date.now()
    });

    document.getElementById('status').innerText = `Location sent: ${lat.toFixed(5)}, ${lng.toFixed(5)}`;
  }

  function locationError(err) {
    document.getElementById('status').innerText = 'Error getting location: ' + err.message;
  }

  // ---------- Watch GPS ----------
  if (navigator.geolocation) {
    navigator.geolocation.watchPosition(sendLocation, locationError, {enableHighAccuracy:true, maximumAge:5000, timeout:10000});
  } else {
    document.getElementById('status').innerText = 'Geolocation not supported';
  }
</script>
</body>
</html>